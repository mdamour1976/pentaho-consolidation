<?xml version="1.0" encoding="UTF-8"?>
<transformation>
  <info>
    <name/>
    <directory>/</directory>
    <log>
      <read/>
      <write/>
      <input/>
      <output/>
      <update/>
      <connection/>
      <table/>
      <use_batchid>Y</use_batchid>
      <use_logfield>N</use_logfield>
      </log>
    <maxdate>
      <connection/>
      <table/>
      <field/>
      <offset>0.0</offset>
      <maxdiff>0.0</maxdiff>
      </maxdate>
    <size_rowset>350</size_rowset>
    <sleep_time_empty>1</sleep_time_empty>
    <sleep_time_full>1</sleep_time_full>
    <dependencies>
      </dependencies>
    </info>
  <notepads>
    <notepad>
      <note>This transformation helps:
- to give an overview of translations (e.g. compare two languages)
- to find not translated externalizations (TODO)
- translations that violate any proposals (TODO)

Before running, all properties files must be merged in one directory with
&apos;TranslationMergeProps.vbs&apos; - see _Readme.txt in ..\docsdev\translations</note>
      <xloc>19</xloc>
      <yloc>23</yloc>
      <width>364</width>
      <heigth>101</heigth>
      </notepad>
    <notepad>
      <note>In Excel you can do a Pivot-Table
and compare more easily...</note>
      <xloc>501</xloc>
      <yloc>76</yloc>
      <width>170</width>
      <heigth>36</heigth>
      </notepad>
    </notepads>
  <order>
  <hop> <from>Read all translation rules</from><to>TODO</to><enabled>Y</enabled> </hop>  <hop> <from>Read all properties files</from><to>Pull out the fields</to><enabled>Y</enabled> </hop>  <hop> <from>Pull out the fields</from><to>remove old fields</to><enabled>Y</enabled> </hop>  <hop> <from>remove old fields</from><to>Select languages to compare</to><enabled>Y</enabled> </hop>  <hop> <from>Select languages to compare</from><to>Write to analyze.csv</to><enabled>Y</enabled> </hop>  <hop> <from>Select languages to compare</from><to>Dummy (do nothing)</to><enabled>Y</enabled> </hop>  </order>

  <step>
    <name>TODO</name>
    <type>Dummy</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
    <GUI>
      <xloc>218</xloc>
      <yloc>263</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Pull out the fields</name>
    <type>ScriptValue</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
    <script>//----- get key and text -----
//split the line and scan for the first &apos;=&apos;
//(since there could be more than one &apos;=&apos;, we canÂ´t use CSV-Format or Split-Field-Step)

var transLine = TransLine.clone().getString();
var tlLength = transLine.length();
var TransKey = &quot;&quot;;
var TransText = &quot;&quot;;
for(i=0;i&lt;tlLength;i++)
{
	if(transLine.substr(i,1) == &apos;=&apos;) break;
	TransKey = TransKey + transLine.substr(i,1);
}
if(i&lt;tlLength)
{
	TransText = transLine.substr(i+1);
}
else
{	//no &apos;=&apos; found -&gt; better would be an exception...
	TransText = transLine;
}

//----- get the language from TransFilename (...messages_xx_XX.properties) -----

var transFilename = TransFilename.clone().getString();
var tfLength = transFilename.length();
var TransLanguage = transFilename.substr(tfLength-16, 5);

//----- get the class from TransFilename (class.messages_xx_XX.properties) -----

var TransClass = &quot;&quot;;
for(i=tfLength-27;i&gt;=0;i--)
{
	if(transFilename.substr(i,1) == &apos;\\&apos;) break;
	TransClass = transFilename.substr(i,1) + TransClass;
}
</script>
    <fields>      <field>        <name>TransClass</name>
        <rename>TransClass</rename>
        <type>String</type>
        <length>512</length>
        <precision>-1</precision>
        </field>      <field>        <name>TransLanguage</name>
        <rename>TransLanguage</rename>
        <type>String</type>
        <length>5</length>
        <precision>-1</precision>
        </field>      <field>        <name>TransKey</name>
        <rename>TransKey</rename>
        <type>String</type>
        <length>256</length>
        <precision>-1</precision>
        </field>      <field>        <name>TransText</name>
        <rename>TransText</rename>
        <type>String</type>
        <length>1024</length>
        <precision>-1</precision>
        </field>      </fields>    <GUI>
      <xloc>185</xloc>
      <yloc>150</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Read all properties files</name>
    <type>TextFileInput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
    <separator/>
    <enclosure/>
    <enclosure_breaks>N</enclosure_breaks>
    <escapechar/>
    <header>N</header>
    <nr_headerlines>1</nr_headerlines>
    <footer>N</footer>
    <nr_footerlines>1</nr_footerlines>
    <line_wrapped>N</line_wrapped>
    <nr_wraps>1</nr_wraps>
    <layout_paged>N</layout_paged>
    <nr_lines_per_page>80</nr_lines_per_page>
    <nr_lines_doc_header>0</nr_lines_doc_header>
    <noempty>Y</noempty>
    <include>Y</include>
    <include_field>TransFilename</include_field>
    <rownum>N</rownum>
    <rownum_field/>
    <format>mixed</format>
    <encoding/>
    <file>
      <name>C:\Develop\Kettle\translations\analyze</name>
      <filemask>.*properties$</filemask>
      <file_required/>
      <type>Fixed</type>
      <zipped>N</zipped>
      </file>
    <filters>
      <filter>
        <filter_string>Base64: Iw==</filter_string>        <filter_position>0</filter_position>        <filter_is_last_line>N</filter_is_last_line>      </filter>
      </filters>
    <fields>
      <field>
        <name>TransLine</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <ifnull/>
        <position>0</position>
        <length>1024</length>
        <precision>-1</precision>
        <trim_type>both</trim_type>
        <repeat>N</repeat>
        </field>
      </fields>
    <limit>0</limit>
    <error_ignored>N</error_ignored>
    <error_line_skipped>N</error_line_skipped>
    <error_count_field/>
    <error_fields_field/>
    <error_text_field/>
    <bad_line_files_destination_directory/>
    <bad_line_files_extension>warning</bad_line_files_extension>
    <error_line_files_destination_directory/>
    <error_line_files_extension>error</error_line_files_extension>
    <line_number_files_destination_directory/>
    <line_number_files_extension>line</line_number_files_extension>
    <date_format_lenient>Y</date_format_lenient>
    <date_format_locale>de_de</date_format_locale>
    <GUI>
      <xloc>71</xloc>
      <yloc>153</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Read all translation rules</name>
    <type>TextFileInput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
    <separator>=</separator>
    <enclosure/>
    <enclosure_breaks>N</enclosure_breaks>
    <escapechar/>
    <header>N</header>
    <nr_headerlines>1</nr_headerlines>
    <footer>N</footer>
    <nr_footerlines>1</nr_footerlines>
    <line_wrapped>N</line_wrapped>
    <nr_wraps>1</nr_wraps>
    <layout_paged>N</layout_paged>
    <nr_lines_per_page>80</nr_lines_per_page>
    <nr_lines_doc_header>0</nr_lines_doc_header>
    <noempty>Y</noempty>
    <include>Y</include>
    <include_field>TransFilename</include_field>
    <rownum>N</rownum>
    <rownum_field/>
    <format>mixed</format>
    <encoding/>
    <file>
      <name>C:\Develop\Kettle\Kettle-src-2.3.0\docsdev\translations</name>
      <filemask>.*properties$</filemask>
      <file_required/>
      <type>CSV</type>
      <zipped>N</zipped>
      </file>
    <filters>
      <filter>
        <filter_string>Base64: Iw==</filter_string>        <filter_position>0</filter_position>        <filter_is_last_line>N</filter_is_last_line>      </filter>
      </filters>
    <fields>
      <field>
        <name>TransSource</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <ifnull/>
        <position>-1</position>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>both</trim_type>
        <repeat>N</repeat>
        </field>
      <field>
        <name>TransProposal</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <ifnull/>
        <position>-1</position>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>both</trim_type>
        <repeat>N</repeat>
        </field>
      </fields>
    <limit>0</limit>
    <error_ignored>N</error_ignored>
    <error_line_skipped>N</error_line_skipped>
    <error_count_field/>
    <error_fields_field/>
    <error_text_field/>
    <bad_line_files_destination_directory/>
    <bad_line_files_extension>warning</bad_line_files_extension>
    <error_line_files_destination_directory/>
    <error_line_files_extension>error</error_line_files_extension>
    <line_number_files_destination_directory/>
    <line_number_files_extension>line</line_number_files_extension>
    <date_format_lenient>Y</date_format_lenient>
    <date_format_locale>de_de</date_format_locale>
    <GUI>
      <xloc>69</xloc>
      <yloc>267</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Write to analyze.csv</name>
    <type>TextFileOutput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
    <separator>;</separator>
    <enclosure>&quot;</enclosure>
    <enclosure_forced>N</enclosure_forced>
    <header>Y</header>
    <footer>N</footer>
    <format>DOS</format>
    <encoding/>
    <file>
      <name>C:\Develop\Kettle\translations\analyze</name>
      <extention>csv</extention>
      <append>N</append>
      <split>N</split>
      <add_date>N</add_date>
      <add_time>N</add_time>
      <zipped>N</zipped>
      <pad>N</pad>
      <splitevery>0</splitevery>
      </file>
    <fields>
      </fields>
    <GUI>
      <xloc>554</xloc>
      <yloc>151</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>remove old fields</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
    <fields>      <remove>        <name>TransLine</name>
        </remove>      <remove>        <name>TransFilename</name>
        </remove>      </fields>    <GUI>
      <xloc>292</xloc>
      <yloc>151</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Select languages to compare</name>
    <type>FilterRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
<send_true_to>Write to analyze.csv</send_true_to>
<send_false_to>Dummy (do nothing)</send_false_to>
    <compare>
<condition>
 <negated>N</negated>
 <conditions>
  <condition>
   <negated>N</negated>
   <leftvalue>TransLanguage</leftvalue>
   <function>=</function>
   <rightvalue/>
<value>     <name>constant</name><type>String</type><text>en_US</text><length>-1</length><precision>-1</precision><isnull>N</isnull>  </value>   </condition>
  <condition>
   <negated>N</negated>
   <operator>OR</operator>
   <leftvalue>TransLanguage</leftvalue>
   <function>=</function>
   <rightvalue/>
<value>     <name>constant</name><type>String</type><text>de_DE</text><length>-1</length><precision>-1</precision><isnull>N</isnull>  </value>   </condition>
  </conditions>
 </condition>
    </compare>
    <GUI>
      <xloc>411</xloc>
      <yloc>150</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Dummy (do nothing)</name>
    <type>Dummy</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
    <GUI>
      <xloc>415</xloc>
      <yloc>246</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

</transformation>
