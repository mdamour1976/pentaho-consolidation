<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:pho="http:/www.pentaho.com">
<head>
    <title>Report Web Viewer</title>

    <script language="javascript" type="text/javascript" src="webcontext.js?context=reportviewer"></script>

    <!-- CDF Scripts -->
    <!-- 
    <script language="javascript" type="text/javascript" src="../../js/pentaho-ajax.js"></script>
    <script language="javascript" type="text/javascript" src="../../js/options.js"></script>
     -->
    <script language="javascript" type="text/javascript" src="../../../pentaho-cdf/js/jquery.js"></script>
    <script language="javascript" type="text/javascript" src="../../../pentaho-cdf/js/jquery-impromptu.3.1.js"></script>
    <script language="javascript" type="text/javascript" src="../../../pentaho-cdf/js/jquery.ui.js"></script>
    <script language="javascript" type="text/javascript" src="../../../pentaho-cdf/js/jquery.bgiframe.js"></script>
    
    <!-- Including jquery.dimensions.js breaks the JQuery UI Autocomplete Menu position -->
    <!--<script language="javascript" type="text/javascript" src="../../../pentaho-cdf/js/jquery.dimensions.js"></script>-->
    <script language="javascript" type="text/javascript" src="../../../pentaho-cdf/js/jquery.jdMenu.js"></script>
    <script language="javascript" type="text/javascript" src="../../../pentaho-cdf/js/jquery.positionBy.js"></script>
    <script language="javascript" type="text/javascript" src="../../../pentaho-cdf/js/jquery.tooltip.js"></script>
    <script language="javascript" type="text/javascript" src="../../../pentaho-cdf/js/jquery.blockUI.js"></script>
    <script language="javascript" type="text/javascript" src="../../../pentaho-cdf/js/jquery.eventstack.js"></script>

    <script language="javascript" type="text/javascript" src="../../../pentaho-cdf/js/Base.js"></script>
    <script language="javascript" type="text/javascript" src="../../../pentaho-cdf/js/Dashboards.js"></script>
    <script language="javascript" type="text/javascript" src="../../../pentaho-cdf/js/CoreComponents.js"></script>
    <!-- 
    <script language="javascript" type="text/javascript" src="../../../pentaho-cdf/js/NavigationComponents.js"></script>
    <script language="javascript" type="text/javascript" src="../../../pentaho-cdf/js/MapComponents.js"></script>
    <script language="javascript" type="text/javascript" src="../../../pentaho-cdf/js/OlapUtils.js"></script>
    -->
    <link rel="stylesheet" href="../../../pentaho-cdf/js/jquery.tooltip.css" type="text/css" />
    <link rel="stylesheet" href="../../../pentaho-cdf/js/jquery.jdMenu.css" type="text/css" />
    <link rel="stylesheet" href="../../../pentaho-cdf/js/jquery.jdMenu.slate.css" type="text/css" />
    <link rel="stylesheet" href="../../../pentaho-cdf/js/jquery-impromptu.css" type="text/css" />
    <link rel="stylesheet" href="../../../pentaho-cdf/js/cdf.css" type="text/css" />

    <link rel="stylesheet" type="text/css" href="../../../common-ui/resources/web/dojo/dijit/themes/pentaho/pentaho.css"/>
    <link rel="stylesheet" href="../../../common-ui/resources/web/prompting/pentaho-prompting.css" type="text/css" />
    <link rel="stylesheet" href="../../reportviewer/report.css" type="text/css" />
    <link rel="stylesheet" href="reportviewer.css" type="text/css" />

    <script type="text/javascript" src="../../../common-ui/resources/web/formatter/formatter.nocache.js"></script>
    <script type="text/javascript" src="../../../common-ui/resources/web/prompting/pentaho-prompting.js"></script>
    <script type="text/javascript" src="../../../common-ui/resources/web/prompting/pentaho-prompting-builders.js"></script>
    <script type="text/javascript" src="../../../common-ui/resources/web/prompting/pentaho-prompting-components.js"></script>

    <script type="text/javascript" src="reportviewer.js"></script>
    <script type="text/javascript" src="reportviewer-messages.js"></script>
    <script type="text/javascript" src="reportviewer-timeutil.js"></script>

    <script language='javascript' type='text/javascript' src='../../../common-ui/resources/web/locale/Messages.js'></script>

    <script language="javascript">

      var djConfig = {
        modulePaths: {
            'pentaho.common': "../pentaho/common"
        },
        parseOnLoad: true,
        baseUrl: '../../../common-ui/resources/web/dojo/dojo/'
      };

      // Set up locale
      djConfig.locale = ReportViewer.getLocale();

      var jsset = Dashboards.getQueryParameter("jsset");
      if( jsset == '' ) {
        document.write("<scr"+"ipt language='javascript' type='text/javascript' src='../../../common-ui/resources/web/dojo/dojo/dojo-all.js'></scr"+"ipt>");
      }
      else {
        document.write("<scr"+"ipt language='javascript' type='text/javascript' src='../../../common-ui/resources/web/dojo/dojo/dojo-all.js.uncompressed.js'></scr"+"ipt>");
      }

     var SimileAjax = {};
     Dashboards.blockUIwithDrag = function() {
        $.blockUI.defaults.message = '';
        $.blockUI.defaults.css.left = '0%';
        $.blockUI.defaults.css.top = '0%';
        $.blockUI.defaults.css.marginLeft = '85px';
        $.blockUI.defaults.css.width = '100%';
        $.blockUI.defaults.css.height = '100%';
        $.blockUI.defaults.css.opacity = '1';
        $.blockUI.defaults.css.backgroundColor = '#ffffcc';
        $.blockUI.defaults.css['-webkit-border-radius'] = '10px'; 
        $.blockUI.defaults.css['-moz-border-radius'] = '10px';
    
        $.blockUI.defaults.overlayCSS.backgroundColor = 'transparent';
        $.blockUI.defaults.overlayCSS.opacity = '0.6';
        $.blockUI.defaults.overlayCSS.cursor = 'wait';
          // There's an issue with BlockUI and IE 8. As we don't even use this feature from CDF, it's hidden here.
          $.blockUI.defaults.showOverlay = false;
        $.blockUI();
      }
    </script>
    <script language="javascript" type="text/javascript" src="../../../pentaho-cdf/js/simile/ajax/scripts/json.js"></script>
    <script type="text/javascript">

      // dojo.require('dojo.parser');
      dojo.require('pentaho.common.Menu');
      dojo.require('pentaho.common.MenuItem');
      dojo.require('pentaho.common.PageControl');

      dojo.ready(function() {
        ReportViewer.load();
      });
    </script>
  </head>
  <body class="tundra body" onresize="if (ReportViewer) { ReportViewer.view.resize(); }">
    <div id="toppanel" class="pentaho-transparent">
      <div id="toppanelinner" >
        <div id="toolbarlinner2" dojoType="dijit.Toolbar" class="pentaho-rounded-panel2-shadowed pentaho-padding-sm pentaho-shine pentaho-background">
          <div id="toolbar" dojoType="dijit.Toolbar" >
            <div id="pageControl" dojoType="pentaho.common.PageControl" class="dijitInline"></div>
            <span dojoType="dijit.ToolbarSeparator"></span>
            <div id="toolbar.parameterToggle" dojoType="dijit.form.ToggleButton" iconClass="dijitEditorIcon dijitEditorIconFilter" showLabel="false">Parameters</div>              
          </div>
        </div>

        <div id="reportControlPanel" class="hidden pentaho-rounded-panel-bottom-lr pentaho-shadow">
          <div id="promptPanel" class="container dojoDndTarget dojoDndHorizontal dojoDndContainer pentaho-rounded-panel-bottom-lr"></div>
        </div>

      </div>
    </div>

    <div id="reportArea" class="pentaho-transparent" scrollexception="true">
      <div id="reportPageOutline" class="pentaho-rounded-panel2-shadowed pentaho-padding-lg pentaho-background">
        <iframe id="reportContent" frameborder="0"></iframe>
      </div>
      <div id="reportPageSpacer"></div>
    </div>

    <!-- <div><iframe id="report" class="gwt-Frame" style="width: 100%; height: 100%;"
      frameborder="0"></iframe></div> -->
  </body>
</table>

<script language="javascript" type="text/javascript">
/**
 * This is called when the formatter gwt module has been loaded. We depend on this so we'll load the prompt after 
 * the formatter has been loaded.
 */
gwtModuleLoaded = function(moduleName) {
  if (moduleName === 'formatter') {
    ReportViewer.createPromptPanel();
  }
}
</script>

  </body>
</html>